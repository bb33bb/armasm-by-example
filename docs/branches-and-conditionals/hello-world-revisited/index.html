<!doctype html><html lang=en-us dir=ltr>
<head>
<meta charset=utf-8>
<meta name=viewport content="width=device-width,initial-scale=1">
<meta name=description content="Write a program displays &#34;Hello World!&#34; and exits with the error code 0.  For the writing of the string, use a macro that prints using a null  terminated string. 
">
<meta name=theme-color content="#FFFFFF">
<meta name=color-scheme content="light dark"><meta property="og:title" content="Program 5: Hello World Revisited">
<meta property="og:description" content="Write a program displays &#34;Hello World!&#34; and exits with the error code 0.  For the writing of the string, use a macro that prints using a null  terminated string. 
">
<meta property="og:type" content="article">
<meta property="og:url" content="/docs/branches-and-conditionals/hello-world-revisited/"><meta property="article:section" content="docs">
<title>Program 5: Hello World Revisited | ARM Assembly By Example</title>
<link rel=manifest href=/manifest.json>
<link rel=icon href=/favicon.png type=image/x-icon>
<link rel=stylesheet href=/book.min.c58292d36b18b675680ab9baea2029204537b839ea72f258746ec0f32ce8d6c8.css>
<script defer src=/flexsearch.min.js></script>
<script defer src=/en.search.min.cdf1d3339ad599910ecaf0b922791999eccee31382959665fd94442ac92b40e9.js></script>
<style>.blink_text{animation:.5s blinker linear infinite;color:red}@keyframes blinker{0%{opacity:1}50%{opacity:0}100%{opacity:1}}</style>
</head>
<body dir=ltr>
<input type=checkbox class="hidden toggle" id=menu-control>
<input type=checkbox class="hidden toggle" id=toc-control>
<main class="container flex">
<aside class=book-menu>
<div class=book-menu-content>
<nav>
<h2 class=book-brand>
<a class="flex align-center" href=/><span>ARM Assembly By Example</span>
</a>
</h2>
<div class=book-search>
<input type=text id=book-search-input placeholder=Search aria-label=Search maxlength=64 data-hotkeys=s/>
<div class="book-search-spinner hidden"></div>
<ul id=book-search-results></ul>
</div>
<ul>
<li class=book-section-flat>
<span>Getting to Hello World</span>
<ul>
<li>
<a href=/docs/getting-to-hello-world/basics/>The Basics</a>
</li>
<li>
<a href=/docs/getting-to-hello-world/exiting/>Program 1: Exiting</a>
</li>
<li>
<a href=/docs/getting-to-hello-world/hello-world/>Program 2: Hello World</a>
</li>
</ul>
</li>
<li class=book-section-flat>
<span>Registers and Memory</span>
<ul>
<li>
<a href=/docs/registers-and-memory/register-overview/>Register Overview</a>
</li>
<li>
<a href=/docs/registers-and-memory/memory-overview/>Memory Overview</a>
</li>
<li>
<a href=/docs/registers-and-memory/find-the-otter/>Program 3: Find the Otter</a>
</li>
<li>
<a href=/docs/registers-and-memory/memory-copy/>Program 4: Memory Copy</a>
</li>
</ul>
</li>
<li class=book-section-flat>
<span>Branches and Conditionals</span>
<ul>
<li>
<a href=/docs/branches-and-conditionals/conditionals/>Conditionals</a>
</li>
<li>
<a href=/docs/branches-and-conditionals/branches-and-loops/>Branches and Loops</a>
</li>
<li>
<a href=/docs/branches-and-conditionals/hello-world-revisited/ class=active>Program 5: Hello World Revisited</a>
</li>
<li>
<a href=/docs/branches-and-conditionals/sticky-keyboard/>Program 6: Sticky Keyboard</a>
</li>
<li>
<a href=/docs/branches-and-conditionals/inspecting-our-program/>Inspecting Our Program</a>
</li>
<li>
<a href=/docs/branches-and-conditionals/cloning-myself/>Program 7: Cloning Myself</a>
</li>
</ul>
</li>
<li class=book-section-flat>
<span>Arithmetic</span>
<ul>
<li>
<a href=/docs/arithmetic/errors-and-tests/>Errors and Tests</a>
</li>
<li>
<a href=/docs/arithmetic/datatypes/>Datatypes</a>
</li>
<li>
<a href=/docs/arithmetic/multiplication/>Multiplication</a>
</li>
<li>
<a href=/docs/arithmetic/itoa/>Program 8: ITOA</a>
</li>
<li>
<a href=/docs/arithmetic/the-stack/>The Stack</a>
</li>
<li>
<a href=/docs/arithmetic/factorial/>Program 9: Factorials</a>
</li>
<li>
<a href=/docs/arithmetic/sum-of-squares/>Program 10: Sum of Squares</a>
</li>
</ul>
</li>
<li class=book-section-flat>
<span>Bit Operations</span>
<ul>
<li>
<a href=/docs/bit-operations/signed-numbers/>Signed Numbers</a>
</li>
<li>
<a href=/docs/bit-operations/positivty/>Program 11: All Positivity</a>
</li>
<li>
<a href=/docs/bit-operations/exorcise/>Exorcise and bicycle orr...</a>
</li>
<li>
<a href=/docs/bit-operations/ok-be-negative/>Program 12: Ok, Be Negative</a>
</li>
<li>
<a href=/docs/bit-operations/xor-cipher/>Program 13: XOR Cipher</a>
</li>
<li>
<a href=/docs/bit-operations/shifting/>Shifting and Rotating</a>
</li>
<li>
<a href=/docs/bit-operations/hex-and-love/>Program 14: Hex and Love</a>
</li>
<li>
<a href=/docs/bit-operations/unsale/>Program 15: The Un-sale</a>
</li>
<li>
<a href=/docs/bit-operations/64-bit-math/>Program 16: 64-bit Math</a>
</li>
</ul>
</li>
<li class=book-section-flat>
<span>Working in Linux</span>
<ul>
<li>
<a href=/docs/working-in-linux/add-the-arguments/>Program 17: Add the Arguments</a>
</li>
<li>
<a href=/docs/working-in-linux/add-the-inputs/>Program 18: Add the Inputs</a>
</li>
<li>
<a href=/docs/working-in-linux/add-the-file/>Program 19: Add the File</a>
</li>
</ul>
</li>
<li class=book-section-flat>
<span>Appendix A: VFP Coprocessor</span>
<ul>
<li>
<a href=/docs/fpu/overview/>FPU Overview</a>
</li>
<li>
<a href=/docs/fpu/here-to-there/>Program 20: Here to There</a>
</li>
</ul>
</li>
<li class=book-section-flat>
<span>Appendix B: NEON Coprocessor</span>
<ul>
<li>
<a href=/docs/neon/overview/>NEON Overview</a>
</li>
<li>
<a href=/docs/neon/bus-rider/>Program 21: Bus Rider</a>
</li>
</ul>
</li>
</ul>
</nav>
<script>(function(){var a=document.querySelector("aside .book-menu-content");addEventListener("beforeunload",function(b){localStorage.setItem("menu.scrollTop",a.scrollTop)}),a.scrollTop=localStorage.getItem("menu.scrollTop")})()</script>
</div>
</aside>
<div class=book-page>
<header class=book-header>
<div class="flex align-center justify-between">
<label for=menu-control>
<img src=/svg/menu.svg class=book-icon alt=Menu>
</label>
<strong>Program 5: Hello World Revisited</strong>
<label for=toc-control>
<img src=/svg/toc.svg class=book-icon alt="Table of Contents">
</label>
</div>
<aside class="hidden clearfix">
<nav id=TableOfContents>
<ul>
<li><a href=#including-other-files-pt-1>Including Other Files, Pt. 1</a>
<ul>
<li><a href=#macro-directive>MACRO directive</a></li>
<li><a href=#local-labels>Local labels</a></li>
<li><a href=#include-directive>INCLUDE directive</a></li>
</ul>
</li>
<li><a href=#null-terminated-strings>Null terminated strings</a></li>
</ul>
</nav>
</aside>
</header>
<article class=markdown>
<h1>
<a href=/docs/branches-and-conditionals/hello-world-revisited/ style=color:#000>Program 5: Hello World Revisited</a>
</h1>
<h2 id=including-other-files-pt-1>
Including Other Files, Pt. 1
<a class=anchor href=#including-other-files-pt-1>#</a>
</h2>
<h3 id=macro-directive>
MACRO directive
<a class=anchor href=#macro-directive>#</a>
</h3>
<p>Putting everything in one file is great keeping code together, but absolutely awful
for more than trivial programs as the number of lines of code grows rapidly. There
are two ways you can include code in from other files and this is the first way.
Like a keyboard macro, the MACRO directive puts an exact copy of the code at the
point of inclusion.</p>
<div class=highlight><pre tabindex=0 style=color:#586e75;background-color:#eee8d5;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-armasm data-lang=armasm><span style=color:#93a1a1;font-style:italic>@ the syntax is .macro followed by the name of the macro followed by a 
</span><span style=color:#93a1a1;font-style:italic>@ comma seperated list of arguments expected. 
</span><span style=color:#93a1a1;font-style:italic></span><span style=color:#dc322f;font-weight:700>.macro</span><span style=color:#268bd2>      macroname </span>      arg1, arg2, arg3          

    <span style=color:#93a1a1;font-style:italic>@ arguments are inserted in the code with a backslash 
</span><span style=color:#93a1a1;font-style:italic></span>    mov     <span style=color:#cb4b16>r0</span>, \arg1           <span style=color:#93a1a1;font-style:italic>@ loads the immediate into r0 
</span><span style=color:#93a1a1;font-style:italic></span>
<span style=color:#93a1a1;font-style:italic>@ macros are ended by the .endm directive 
</span><span style=color:#93a1a1;font-style:italic></span><span style=color:#dc322f;font-weight:700>.endm</span> 
</code></pre></div><h3 id=local-labels>
Local labels
<a class=anchor href=#local-labels>#</a>
</h3>
<p>Since the macro includes the code verbatim, you need to consider what would not
work as if everything were in one file. One such instance would be labels as they
need to be unique within the <strong>file</strong>. We can accomplish this by using local labels.
Local labels are a number from 0-99 followed by a colon. You can then append either
a -f or a -b to look for that number forward or backwards.</p>
<div class=highlight><pre tabindex=0 style=color:#586e75;background-color:#eee8d5;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-armasm data-lang=armasm><span style=color:#268bd2>1</span>: 
    add     <span style=color:#cb4b16>r0</span>, #<span style=color:#2aa198;font-weight:700>1</span>      <span style=color:#93a1a1;font-style:italic>@ add 1 to r0 
</span><span style=color:#93a1a1;font-style:italic></span>    cmp     <span style=color:#cb4b16>r0</span>, #<span style=color:#2aa198;font-weight:700>5</span>      <span style=color:#93a1a1;font-style:italic>@ compare 0 to 5 
</span><span style=color:#93a1a1;font-style:italic></span>    beq     2f          <span style=color:#93a1a1;font-style:italic>@ go on if equal 
</span><span style=color:#93a1a1;font-style:italic></span>    b       1b 
2: 
    <span style=color:#93a1a1;font-style:italic>@ Code continues.... 
</span></code></pre></div><h3 id=include-directive>
INCLUDE directive
<a class=anchor href=#include-directive>#</a>
</h3>
<p>The last part of this is to actually include the file that has the macro if we
put it in an external file. We do this with the include directive. The include
directive simply includes the file, in the exact space, as if it were the same file.</p>
<h2 id=null-terminated-strings>
Null terminated strings
<a class=anchor href=#null-terminated-strings>#</a>
</h2>
<p>When you use a macro, you start getting into an area where you need to trust the
person using your code to provide things such as output memory space. So we need to
create a macro that can be used in any program, even if we don&rsquo;t know the length.
One way programs do this is by null terminated data. It&rsquo;s such a great idea, there&rsquo;s
a macro for that too! The two following data items will load the same data into memory.</p>
<div class=highlight><pre tabindex=0 style=color:#586e75;background-color:#eee8d5;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-armasm data-lang=armasm><span style=color:#dc322f;font-weight:700>.data</span>
<span style=color:#268bd2>explictnull</span>:<span style=color:#dc322f;font-weight:700>        .ascii      </span>&#34;<span style=color:#2aa198>String with null\0</span>&#34; 
<span style=color:#268bd2>datanull</span>:<span style=color:#dc322f;font-weight:700>           .asciz      </span>&#34;<span style=color:#2aa198>String with null</span>&#34; 
</code></pre></div><hr>
<h2>Program 5: Hello World Revisited Video </h2>
<div style=position:relative;padding-bottom:56.25%;height:0;overflow:hidden>
<iframe src=https://www.youtube.com/embed/Gvh9mKpvhKo style=position:absolute;top:0;left:0;width:100%;height:100%;border:0 allowfullscreen title="YouTube Video"></iframe>
</div>
<div style=width:100%;display:flex;flex-direction:column>
<div style="flex:1 0;padding-bottom:16px">
<div style="display:flex;flex:1 0 auto;flex-direction:column">
<div style=font-weight:700>Description of Program</div>
<div>Write a program displays &ldquo;Hello World!&rdquo; and exits with the error code 0. For the writing of the string, use a macro that prints using a null terminated string.</div>
</div>
</div>
<div style=display:flex;flex-direction:row>
<div style="display:flex;flex:1 0 auto;flex-direction:column">
<div style=font-weight:700>Template/Input</div>
<div>
None
</div>
</div>
<div style="display:flex;flex:1 0 auto;flex-direction:column">
<div style=font-weight:700>Completed Code</div>
<div><a href=https://github.com/gpit2286/armasm-by-example/tree/master/05-hello-world-revisited>Github</a></div>
</div>
<div style="display:flex;flex:2 0 auto;flex-direction:column">
<div style=font-weight:700>Expected Output</div>
<div>
<pre style=margin:0;padding-top:4px;width:auto>Hello World!</pre>
</div>
</div>
</div>
</div>
</article>
<footer class=book-footer>
<div class="flex flex-wrap justify-between">
</div>
<script>(function(){function a(c){const a=window.getSelection(),b=document.createRange();b.selectNodeContents(c),a.removeAllRanges(),a.addRange(b)}document.querySelectorAll("pre code").forEach(b=>{b.addEventListener("click",function(c){if(window.getSelection().toString())return;a(b.parentElement),navigator.clipboard&&navigator.clipboard.writeText(b.parentElement.textContent)})})})()</script>
</footer>
<div class=book-comments>
</div>
<label for=menu-control class="hidden book-menu-overlay"></label>
</div>
<aside class=book-toc>
<div class=book-toc-content>
<nav id=TableOfContents>
<ul>
<li><a href=#including-other-files-pt-1>Including Other Files, Pt. 1</a>
<ul>
<li><a href=#macro-directive>MACRO directive</a></li>
<li><a href=#local-labels>Local labels</a></li>
<li><a href=#include-directive>INCLUDE directive</a></li>
</ul>
</li>
<li><a href=#null-terminated-strings>Null terminated strings</a></li>
</ul>
</nav>
</div>
</aside>
</main>
</body>
</html>