<!doctype html><html lang=en-us dir=ltr>
<head>
<meta charset=utf-8>
<meta name=viewport content="width=device-width,initial-scale=1">
<meta name=description content="Conditionals #  There was a brief mention about the status codes stored in the CPSR. This is when you get to start using them. Because assembly doesn&rsquo;t have the concept of data types, the processor needs to figure out another way to define conditions such as equal, not equal, greater than, less than or equal, etc. It does this by looking at the flags of the CPSR.
Comparison methods #  The first thing you need to do is to tell the processor that you want it to update the CPSR.">
<meta name=theme-color content="#FFFFFF">
<meta name=color-scheme content="light dark"><meta property="og:title" content="Conditionals">
<meta property="og:description" content="Conditionals #  There was a brief mention about the status codes stored in the CPSR. This is when you get to start using them. Because assembly doesn&rsquo;t have the concept of data types, the processor needs to figure out another way to define conditions such as equal, not equal, greater than, less than or equal, etc. It does this by looking at the flags of the CPSR.
Comparison methods #  The first thing you need to do is to tell the processor that you want it to update the CPSR.">
<meta property="og:type" content="article">
<meta property="og:url" content="https://armasm.com/docs/branches-and-conditionals/conditionals/"><meta property="article:section" content="docs">
<title>Conditionals | ARM Assembly By Example</title>
<link rel=manifest href=/manifest.json>
<link rel=icon href=/favicon.png type=image/x-icon>
<link rel=stylesheet href=/book.min.c58292d36b18b675680ab9baea2029204537b839ea72f258746ec0f32ce8d6c8.css integrity="sha256-xYKS02sYtnVoCrm66iApIEU3uDnqcvJYdG7A8yzo1sg=" crossorigin=anonymous>
<script defer src=/flexsearch.min.js></script>
<script defer src=/en.search.min.cdf1d3339ad599910ecaf0b922791999eccee31382959665fd94442ac92b40e9.js integrity="sha256-zfHTM5rVmZEOyvC5InkZmezO4xOClZZl/ZREKskrQOk=" crossorigin=anonymous></script>
<style>.blink_text{animation:.5s blinker linear infinite;color:red}@keyframes blinker{0%{opacity:1}50%{opacity:0}100%{opacity:1}}</style>
</head>
<body dir=ltr>
<input type=checkbox class="hidden toggle" id=menu-control>
<input type=checkbox class="hidden toggle" id=toc-control>
<main class="container flex">
<aside class=book-menu>
<div class=book-menu-content>
<nav>
<h2 class=book-brand>
<a class="flex align-center" href=/><span>ARM Assembly By Example</span>
</a>
</h2>
<div class=book-search>
<input type=text id=book-search-input placeholder=Search aria-label=Search maxlength=64 data-hotkeys=s/>
<div class="book-search-spinner hidden"></div>
<ul id=book-search-results></ul>
</div>
<ul>
<li class=book-section-flat>
<span>Getting to Hello World</span>
<ul>
<li>
<a href=/docs/getting-to-hello-world/basics/>The Basics</a>
</li>
<li>
<a href=/docs/getting-to-hello-world/exiting/>Program 1: Exiting</a>
</li>
<li>
<a href=/docs/getting-to-hello-world/hello-world/>Program 2: Hello World</a>
</li>
</ul>
</li>
<li class=book-section-flat>
<span>Registers and Memory</span>
<ul>
<li>
<a href=/docs/registers-and-memory/register-overview/>Register Overview</a>
</li>
<li>
<a href=/docs/registers-and-memory/memory-overview/>Memory Overview</a>
</li>
<li>
<a href=/docs/registers-and-memory/find-the-otter/>Program 3: Find the Otter</a>
</li>
<li>
<a href=/docs/registers-and-memory/memory-copy/>Program 4: Memory Copy</a>
</li>
</ul>
</li>
<li class=book-section-flat>
<span>Branches and Conditionals</span>
<ul>
<li>
<a href=/docs/branches-and-conditionals/conditionals/ class=active>Conditionals</a>
</li>
<li>
<a href=/docs/branches-and-conditionals/branches-and-loops/>Branches and Loops</a>
</li>
<li>
<a href=/docs/branches-and-conditionals/hello-world-revisited/>Program 5: Hello World Revisited</a>
</li>
<li>
<a href=/docs/branches-and-conditionals/sticky-keyboard/>Program 6: Sticky Keyboard</a>
</li>
<li>
<a href=/docs/branches-and-conditionals/inspecting-our-program/>Inspecting Our Program</a>
</li>
<li>
<a href=/docs/branches-and-conditionals/cloning-myself/>Program 7: Cloning Myself</a>
</li>
</ul>
</li>
<li class=book-section-flat>
<span>Arithmetic</span>
<ul>
<li>
<a href=/docs/arithmetic/errors-and-tests/>Errors and Tests</a>
</li>
<li>
<a href=/docs/arithmetic/datatypes/>Datatypes</a>
</li>
<li>
<a href=/docs/arithmetic/multiplication/>Multiplication</a>
</li>
<li>
<a href=/docs/arithmetic/itoa/>Program 8: ITOA</a>
</li>
<li>
<a href=/docs/arithmetic/the-stack/>The Stack</a>
</li>
<li>
<a href=/docs/arithmetic/factorial/>Program 9: Factorials</a>
</li>
<li>
<a href=/docs/arithmetic/sum-of-squares/>Program 10: Sum of Squares</a>
</li>
</ul>
</li>
<li class=book-section-flat>
<span>Bit Operations</span>
<ul>
<li>
<a href=/docs/bit-operations/signed-numbers/>Signed Numbers</a>
</li>
<li>
<a href=/docs/bit-operations/positivty/>Program 11: All Positivity</a>
</li>
<li>
<a href=/docs/bit-operations/exorcise/>Exorcise and bicycle orr...</a>
</li>
<li>
<a href=/docs/bit-operations/ok-be-negative/>Program 12: Ok, Be Negative</a>
</li>
<li>
<a href=/docs/bit-operations/xor-cipher/>Program 13: XOR Cipher</a>
</li>
<li>
<a href=/docs/bit-operations/shifting/>Shifting and Rotating</a>
</li>
<li>
<a href=/docs/bit-operations/hex-and-love/>Program 14: Hex and Love</a>
</li>
<li>
<a href=/docs/bit-operations/unsale/>Program 15: The Un-sale</a>
</li>
<li>
<a href=/docs/bit-operations/64-bit-math/>Program 16: 64-bit Math</a>
</li>
</ul>
</li>
<li class=book-section-flat>
<span>Working in Linux</span>
<ul>
<li>
<a href=/docs/working-in-linux/add-the-arguments/>Program 17: Add the Arguments</a>
</li>
<li>
<a href=/docs/working-in-linux/add-the-inputs/>Program 18: Add the Inputs</a>
</li>
<li>
<a href=/docs/working-in-linux/add-the-file/>Program 19: Add the File</a>
</li>
</ul>
</li>
<li class=book-section-flat>
<span>Appendix A: VFP Coprocessor</span>
<ul>
<li>
<a href=/docs/fpu/overview/>FPU Overview</a>
</li>
<li>
<a href=/docs/fpu/here-to-there/>Program 20: Here to There</a>
</li>
</ul>
</li>
<li class=book-section-flat>
<span>Appendix B: NEON Coprocessor</span>
<ul>
<li>
<a href=/docs/neon/overview/>NEON Overview</a>
</li>
<li>
<a href=/docs/neon/bus-rider/>Program 21: Bus Rider</a>
</li>
</ul>
</li>
</ul>
</nav>
<script>(function(){var a=document.querySelector("aside .book-menu-content");addEventListener("beforeunload",function(b){localStorage.setItem("menu.scrollTop",a.scrollTop)}),a.scrollTop=localStorage.getItem("menu.scrollTop")})()</script>
</div>
</aside>
<div class=book-page>
<header class=book-header>
<div class="flex align-center justify-between">
<label for=menu-control>
<img src=/svg/menu.svg class=book-icon alt=Menu>
</label>
<strong>Conditionals</strong>
<label for=toc-control>
<img src=/svg/toc.svg class=book-icon alt="Table of Contents">
</label>
</div>
<aside class="hidden clearfix">
<nav id=TableOfContents>
<ul>
<li><a href=#comparison-methods>Comparison methods</a>
<ul>
<li><a href=#the--s-suffix>The -S suffix</a></li>
</ul>
</li>
<li><a href=#conditional-table>Conditional table</a></li>
<li><a href=#conditions-in-practice>Conditions in practice</a></li>
</ul>
</nav>
</aside>
</header>
<article class=markdown><h1 id=conditionals>
Conditionals
<a class=anchor href=#conditionals>#</a>
</h1>
<p>There was a brief mention about the status codes stored in the CPSR. This is when
you get to start using them. Because assembly doesn&rsquo;t have the concept of data types,
the processor needs to figure out another way to define conditions such as equal,
not equal, greater than, less than or equal, etc. It does this by looking at the
flags of the CPSR.</p>
<h2 id=comparison-methods>
Comparison methods
<a class=anchor href=#comparison-methods>#</a>
</h2>
<p>The first thing you need to do is to tell the processor that you want it to update
the CPSR. The first opcode you will use is <code>cmp</code>. <code>cmp</code> takes the two operands and
subtracts the second from the first. From this result, it will then update the CPSR.</p>
<div class=highlight><pre tabindex=0 style=color:#586e75;background-color:#eee8d5;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-armasm data-lang=armasm>    mov     <span style=color:#cb4b16>r0</span>, #<span style=color:#2aa198;font-weight:700>5</span>          <span style=color:#93a1a1;font-style:italic>@ Move 5 into r0 
</span><span style=color:#93a1a1;font-style:italic></span>    mov     <span style=color:#cb4b16>r1</span>, #<span style=color:#2aa198;font-weight:700>2</span>          <span style=color:#93a1a1;font-style:italic>@ Move 2 into r1 
</span><span style=color:#93a1a1;font-style:italic></span>    cmp     <span style=color:#cb4b16>r0</span>, <span style=color:#cb4b16>r1</span>          <span style=color:#93a1a1;font-style:italic>@ Compare r0, r1 and set CPSR 
</span></code></pre></div><p>From this, we now know that the processor will subtract 2 from 5, and use the result (3)
to set the correct flags.</p>
<ul>
<li>The N flag will not be set because the number (3) is not a signed negative.</li>
<li>The Z flag will not be set because the number (3) is not zero</li>
<li>The C flag will be set because we didn&rsquo;t not need to do an imaginary borrow to solve</li>
<li>The V flag will not be set because there was no overflow (greater than or equal
to 2<sup>31</sup>, or less than â€“2<sup>31</sup>)</li>
</ul>
<h3 id=the--s-suffix>
The -S suffix
<a class=anchor href=#the--s-suffix>#</a>
</h3>
<p>The other common way to set the CPSR flags is by appending an -s suffix to an opcode.
Not all opcodes can take the -s suffix, but most can. It&rsquo;s always worth checking the
processor guides when in doubt. The CPSR will be set based on the result of the operation. <sup id=fnref:1><a href=#fn:1 class=footnote-ref role=doc-noteref>1</a></sup></p>
<div class=highlight><pre tabindex=0 style=color:#586e75;background-color:#eee8d5;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-armasm data-lang=armasm>    mov     <span style=color:#cb4b16>r0</span>, #<span style=color:#2aa198;font-weight:700>2</span>      <span style=color:#93a1a1;font-style:italic>@ move 2 into r0 
</span><span style=color:#93a1a1;font-style:italic></span>    mov     <span style=color:#cb4b16>r1</span>, #<span style=color:#2aa198;font-weight:700>1</span>      <span style=color:#93a1a1;font-style:italic>@ move 3 into r1 
</span><span style=color:#93a1a1;font-style:italic></span>    adds    <span style=color:#cb4b16>r0</span>, <span style=color:#cb4b16>r1</span>      <span style=color:#93a1a1;font-style:italic>@ adds 2 and 3 stores into r0 
</span><span style=color:#93a1a1;font-style:italic></span>                        <span style=color:#93a1a1;font-style:italic>@ ALSO sets the following flags based on the number 5
</span><span style=color:#93a1a1;font-style:italic></span>                        <span style=color:#93a1a1;font-style:italic>@ N = 0 because 5 is not signed negative 
</span><span style=color:#93a1a1;font-style:italic></span>                        <span style=color:#93a1a1;font-style:italic>@ Z = 0 because 5 is not zero 
</span><span style=color:#93a1a1;font-style:italic></span>                        <span style=color:#93a1a1;font-style:italic>@ C = 0 because there was no carry 
</span><span style=color:#93a1a1;font-style:italic></span>                        <span style=color:#93a1a1;font-style:italic>@ V = 0 because there was no overflow 
</span></code></pre></div><h2 id=conditional-table>
Conditional table
<a class=anchor href=#conditional-table>#</a>
</h2>
<p>From there you can see how the processor interprets the results with this table.
Using the table, you can see that because of the flags set above, the following
conditions are true for 5 - 2:</p>
<ul>
<li>The two numbers are not equal (Z == 0)</li>
<li>The first number is signed greater than (Z==0) && (N==V)</li>
<li>The first number is signed greater than or equal (N==V)</li>
<li>The first number is unsigned higher or same (C==1)</li>
<li>The result is positive (N==0)</li>
<li>There was no signed overflow (V==0)</li>
<li>The first number is unsigned higher (C==1) && (Z==0)</li>
</ul>
<table>
<thead>
<tr>
<th style=text-align:center>Condition Code</th>
<th style=text-align:left>Meaning with <code>cmp</code></th>
<th style=text-align:center>Status of Flags</th>
</tr>
</thead>
<tbody>
<tr>
<td style=text-align:center>EQ</td>
<td style=text-align:left>Equal</td>
<td style=text-align:center>Z==1</td>
</tr>
<tr>
<td style=text-align:center>NE</td>
<td style=text-align:left>Not Equal</td>
<td style=text-align:center>Z==0</td>
</tr>
<tr>
<td style=text-align:center>GT</td>
<td style=text-align:left>Signed Greater Than</td>
<td style=text-align:center>(Z==0) && (N==V)</td>
</tr>
<tr>
<td style=text-align:center>LT</td>
<td style=text-align:left>Signed Less Than</td>
<td style=text-align:center>N!=V</td>
</tr>
<tr>
<td style=text-align:center>GE</td>
<td style=text-align:left>Signed Greater Than or Equal</td>
<td style=text-align:center>N==V</td>
</tr>
<tr>
<td style=text-align:center>LE</td>
<td style=text-align:left>Signed Less Than or Equal</td>
<td style=text-align:center>(Z==1)</td>
</tr>
<tr>
<td style=text-align:center>CS or HS</td>
<td style=text-align:left>Unsigned Higher or Same (or Carry Set)</td>
<td style=text-align:center>C==1</td>
</tr>
<tr>
<td style=text-align:center>CC or LO</td>
<td style=text-align:left>Unsigned Lower (or Carry Clear)</td>
<td style=text-align:center>C==0</td>
</tr>
<tr>
<td style=text-align:center>MI</td>
<td style=text-align:left>Negative (or Minus)</td>
<td style=text-align:center>N==1</td>
</tr>
<tr>
<td style=text-align:center>PL</td>
<td style=text-align:left>Positive (or Plus)</td>
<td style=text-align:center>N==0</td>
</tr>
<tr>
<td style=text-align:center>AL</td>
<td style=text-align:left>Always executed</td>
<td style=text-align:center>N/A</td>
</tr>
<tr>
<td style=text-align:center>VS</td>
<td style=text-align:left>Signed Overflow</td>
<td style=text-align:center>V==1</td>
</tr>
<tr>
<td style=text-align:center>VC</td>
<td style=text-align:left>No signed Overflow</td>
<td style=text-align:center>V==0</td>
</tr>
<tr>
<td style=text-align:center>HI</td>
<td style=text-align:left>Unsigned Higher</td>
<td style=text-align:center>(C==1) && (Z==0)</td>
</tr>
<tr>
<td style=text-align:center>LS</td>
<td style=text-align:left>Unsigned Lower or same</td>
<td style=text-align:center>(C==0)</td>
</tr>
</tbody>
</table>
<h2 id=conditions-in-practice>
Conditions in practice
<a class=anchor href=#conditions-in-practice>#</a>
</h2>
<p>From here, you can use these condition codes and affix them to most opcodes!</p>
<div class=highlight><pre tabindex=0 style=color:#586e75;background-color:#eee8d5;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-armasm data-lang=armasm>    mov         <span style=color:#cb4b16>r0</span>, #<span style=color:#2aa198;font-weight:700>5</span>      <span style=color:#93a1a1;font-style:italic>@ Move 5 into r0 
</span><span style=color:#93a1a1;font-style:italic></span>    mov         <span style=color:#cb4b16>r1</span>, #<span style=color:#2aa198;font-weight:700>7</span>      <span style=color:#93a1a1;font-style:italic>@ Move 7 into r1 
</span><span style=color:#93a1a1;font-style:italic></span>    cmp         <span style=color:#cb4b16>r0</span>, <span style=color:#cb4b16>r1</span>      <span style=color:#93a1a1;font-style:italic>@ Internally performs 5-7 and updates CPSR 
</span><span style=color:#93a1a1;font-style:italic></span>                            <span style=color:#93a1a1;font-style:italic>@ based on result (-2), 
</span><span style=color:#93a1a1;font-style:italic></span>                            <span style=color:#93a1a1;font-style:italic>@ specifically Z = 0 in this case 
</span><span style=color:#93a1a1;font-style:italic></span>    addeq       <span style=color:#cb4b16>r0</span>, #<span style=color:#2aa198;font-weight:700>10</span>     <span style=color:#93a1a1;font-style:italic>@ Will NOT add 10 (eq requires Z == 1)
</span><span style=color:#93a1a1;font-style:italic></span>    addne       <span style=color:#cb4b16>r0</span>, #<span style=color:#2aa198;font-weight:700>5</span>      <span style=color:#93a1a1;font-style:italic>@ Will add 5 (ne requires Z == 0) 
</span></code></pre></div><section class=footnotes role=doc-endnotes>
<hr>
<ol>
<li id=fn:1 role=doc-endnote>
<p>Since CMP uses subtraction it is essentially using the SUBS opcode. The
difference is that SUBS will save the result, CMP discards it.&#160;<a href=#fnref:1 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p>
</li>
</ol>
</section>
</article>
<footer class=book-footer>
<div class="flex flex-wrap justify-between">
</div>
<script>(function(){function a(c){const a=window.getSelection(),b=document.createRange();b.selectNodeContents(c),a.removeAllRanges(),a.addRange(b)}document.querySelectorAll("pre code").forEach(b=>{b.addEventListener("click",function(c){if(window.getSelection().toString())return;a(b.parentElement),navigator.clipboard&&navigator.clipboard.writeText(b.parentElement.textContent)})})})()</script>
</footer>
<div class=book-comments>
</div>
<label for=menu-control class="hidden book-menu-overlay"></label>
</div>
<aside class=book-toc>
<div class=book-toc-content>
<nav id=TableOfContents>
<ul>
<li><a href=#comparison-methods>Comparison methods</a>
<ul>
<li><a href=#the--s-suffix>The -S suffix</a></li>
</ul>
</li>
<li><a href=#conditional-table>Conditional table</a></li>
<li><a href=#conditions-in-practice>Conditions in practice</a></li>
</ul>
</nav>
</div>
</aside>
</main>
</body>
</html>